<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Free Play Store Publisher</title>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&family=Product+Sans&family=Kaushan+Script&family=Noto+Nastaliq+Urdu&display=swap" rel="stylesheet">
    <style>
        body { background-color: #f0ebf8; font-family: 'Roboto', sans-serif; margin: 0; padding-bottom: 50px; }
        .form-container { max-width: 640px; margin: 0 auto; padding-top: 15px; }

        /* --- TICKER CSS --- */
        .ticker-container {
            width: 100%;
            background-color: #f8f9fa;
            border: 1px solid #dadce0;
            border-radius: 6px;
            height: 48px;
            display: flex;
            align-items: center;
            overflow: hidden;
            position: relative;
            box-shadow: 0 1px 2px rgba(0,0,0,0.1);
            margin-bottom: 12px;
        }

        .ticker-label {
            background-color: #b71c1c;
            color: white;
            padding: 0 15px;
            height: 100%;
            display: flex;
            align-items: center;
            font-weight: bold;
            font-family: 'Noto Nastaliq Urdu', sans-serif;
            font-size: 14px;
            z-index: 10;
            position: absolute;
            right: 0;
            top: 0;
            white-space: nowrap;
        }

        .ticker-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            padding-right: 100px; /* Space for Label */
            padding-left: 10px;
            display: flex;
            align-items: center;
            overflow: hidden;
        }

        .headline-item {
            position: absolute;
            white-space: nowrap;
            font-family: 'Noto Nastaliq Urdu', 'Product Sans', sans-serif;
            font-size: 16px;
            color: #333;
            opacity: 0; /* Initially hidden */
            transition-timing-function: linear; /* Constant speed */
        }

        /* --- HEADER & CARDS --- */
        .header-card { background: white; border-radius: 8px; overflow: hidden; border: 1px solid #dadce0; margin-bottom: 12px; }
        .header-banner { width: 100%; height: 160px; background-image: url('https://images.unsplash.com/photo-1522202176988-66273c2fd55f?ixlib=rb-4.0.3&auto=format&fit=crop&w=1600&q=80'); background-size: cover; background-position: center; }
        .header-content { padding: 24px; }
        .header-main-title { font-family: 'Product Sans', sans-serif; font-size: 28px; color: #202124; margin: 0; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        .header-sub-title { font-family: 'Kaushan Script', cursive; font-size: 32px; color: #db4437; margin-top: 10px; }
        .account-row { display: flex; justify-content: space-between; align-items: center; border-top: 1px solid #eee; margin-top: 10px; padding-top: 10px; font-size: 13px; color: #5f6368; }
        
        .card { background: white; border-radius: 8px; padding: 24px; margin-bottom: 12px; border: 1px solid #dadce0; }
        input { width: 100%; border: none; border-bottom: 1px solid #ddd; padding: 5px 0; outline: none; }
        input:focus { border-bottom: 2px solid #db4437; }
        .btn { background: #db4437; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer; }
        .btn-row { display: flex; justify-content: space-between; margin-top: 20px; }
        .nav-tabs { text-align: center; margin-bottom: 10px; }
        .nav-btn { padding: 8px 16px; background: white; border: 1px solid #dadce0; border-radius: 20px; cursor: pointer; margin: 0 5px; }
        .nav-btn.active { background: #db4437; color: white; border-color: #db4437; }
        #step-2, #step-3, #success-view, #status-view { display: none; }
        .status-item { padding: 10px; border-bottom: 1px solid #eee; }
        .badge { padding: 3px 8px; border-radius: 4px; font-size: 11px; color: white; }
        .bg-p { background: #fbc02d; color: black; } .bg-a { background: #0f9d58; } .bg-r { background: #d93025; }
    </style>
</head>
<body>

    <div class="form-container">
        
        <div class="nav-tabs">
            <button class="nav-btn active" onclick="switchTab('form')">Form</button>
            <button class="nav-btn" onclick="switchTab('status')">My Requests</button>
        </div>

        <!-- TICKER -->
        <div class="ticker-container">
            <div class="ticker-wrapper" id="ticker-wrapper">
                <!-- Headlines go here -->
            </div>
            <div class="ticker-label">اہم اعلان</div>
        </div>

        <div id="form-view">
            <div class="header-card">
                <div class="header-banner"></div>
                <div class="header-content">
                    <h1 class="header-main-title">FREE PLAY STORE APP AND GAME PUBLISHER</h1>
                    <h2 class="header-sub-title">Submit For Better Connection</h2>
                    <div class="account-row">
                        <div><span style="color:#202124; font-weight:500;">mfareedmustafai@gmail.com</span> <a href="#" style="color:#1a73e8; text-decoration:none;">Switch account</a></div>
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="#5f6368"><path d="M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96zM19 18H6c-2.21 0-4-1.79-4-4 0-2.05 1.53-3.76 3.56-3.97l1.07-.11.5-.95C8.08 7.14 9.94 6 12 6c2.62 0 4.88 1.86 5.39 4.43l.3 1.5 1.53.11c1.56.1 2.78 1.41 2.78 2.96 0 1.65-1.35 3-3 3z"/></svg>
                    </div>
                    <div style="color:#d93025; font-size:12px; margin-top:10px;">* Indicates required question</div>
                </div>
            </div>

            <form id="appForm" onsubmit="return false;">
                <div id="step-1">
                    <div class="card"><div class="q-title">Name <span style="color:red">*</span></div><input type="text" id="userName" placeholder="Your answer"></div>
                    <div class="card"><div class="q-title">Email <span style="color:red">*</span></div><input type="email" id="userEmail" placeholder="Your answer"></div>
                    <div class="card"><div class="q-title">WhatsApp <span style="color:red">*</span></div><input type="text" id="userPhone" placeholder="Your answer"></div>
                    <div class="btn-row" style="justify-content: flex-end;"><button class="btn" onclick="nextStep(1)">Next</button></div>
                </div>
                <div id="step-2">
                    <div class="card" style="padding:0;"><div style="background:#ffab91; padding:10px 24px;">App Details</div><div style="padding:20px;">Provide correct details.</div></div>
                    <div class="card"><div class="q-title">App Name <span style="color:red">*</span></div><input type="text" id="appName"></div>
                    <div class="card"><div class="q-title">Logo Link <span style="color:red">*</span></div><input type="url" id="appLogo"></div>
                    <div class="card"><div class="q-title">Long Desc <span style="color:red">*</span></div><input type="text" id="appLongDesc"></div>
                    <div class="card"><div class="q-title">Short Desc <span style="color:red">*</span></div><input type="text" id="appShortDesc"></div>
                    <div class="card"><div class="q-title">Screenshots <span style="color:red">*</span></div><input type="url" id="appScreenshots"></div>
                    <div class="card"><div class="q-title">APK Link <span style="color:red">*</span></div><input type="url" id="apkLink"></div>
                    <div class="card"><div class="q-title">AAB Link <span style="color:red">*</span></div><input type="url" id="aabLink"></div>
                    <div class="card"><div class="q-title">Privacy Policy <span style="color:red">*</span></div><input type="url" id="privacyLink"></div>
                    <div class="btn-row"><button class="btn" style="background:none; color:#db4437" onclick="prevStep(1)">Back</button><button class="btn" onclick="nextStep(2)">Next</button></div>
                </div>
                <div id="step-3">
                    <div class="card"><div class="q-title">Payment</div><input type="radio" checked> Free of Cost</div>
                    <div class="btn-row"><button class="btn" style="background:none; color:#db4437" onclick="prevStep(2)">Back</button><button class="btn" onclick="submitForm()">Submit</button></div>
                </div>
            </form>
            <div id="success-view"><div class="header-card"><div class="header-content"><h1>Submitted!</h1><a href="#" onclick="location.reload()">Submit another</a></div></div></div>
        </div>

        <div id="status-view">
            <div class="header-card"><div class="header-content"><h1>Check Status</h1></div></div>
            <div class="card"><input type="email" id="statusEmail" placeholder="your email"><br><br><button class="btn" onclick="checkStatus()">Check</button></div>
            <div id="resultsArea" class="card" style="display:none;"></div>
        </div>

        <div style="text-align:center; margin-top:30px; font-weight:bold;">CREATED BY M.FAREED MUSTAFAI</div>
        <div style="text-align:center; font-size:12px; margin-top:5px; color:#555;">Google Forms content neither created nor endorsed by Google.</div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>
    <script>
        const firebaseConfig = {
            apiKey: "AIzaSyCPXwagCODQ85FN4SOF4x20EZxUAmybX6I",
            authDomain: "free-play-store-app-publisher.firebaseapp.com",
            databaseURL: "https://free-play-store-app-publisher-default-rtdb.firebaseio.com",
            projectId: "free-play-store-app-publisher",
            storageBucket: "free-play-store-app-publisher.firebasestorage.app",
            messagingSenderId: "403752263394",
            appId: "1:403752263394:web:2258ddfe93de3102c788bb"
        };
        firebase.initializeApp(firebaseConfig);
        const db = firebase.database();

        // --- NEW TICKER LOGIC (Calculated Speed) ---
        let headlines = [];
        let currentIndex = 0;
        let tickerContainer = document.getElementById('ticker-wrapper');

        db.ref('headlines').on('value', snap => {
            headlines = [];
            if(snap.exists()) {
                snap.forEach(c => headlines.push(c.val().text));
                // If animation not running, start it
                if(document.querySelectorAll('.headline-item').length === 0) startTicker();
            } else {
                tickerContainer.innerHTML = '';
            }
        });

        function isUrdu(text) {
            return /[\u0600-\u06FF]/.test(text);
        }

        function startTicker() {
            if(headlines.length === 0) return;
            tickerContainer.innerHTML = ''; // Clear previous
            
            const text = headlines[currentIndex];
            const el = document.createElement('div');
            el.className = 'headline-item';
            el.innerText = text;

            // 1. Position based on Language
            if(isUrdu(text)) {
                el.style.right = "100px"; // Align Right
                el.style.textAlign = "right";
            } else {
                el.style.left = "10px"; // Align Left
                el.style.textAlign = "left";
            }
            
            tickerContainer.appendChild(el);

            // 2. FADE IN (Show text)
            setTimeout(() => { el.style.opacity = 1; }, 100);

            // 3. WAIT 3 SECONDS
            setTimeout(() => {
                const containerWidth = tickerContainer.offsetWidth;
                const textWidth = el.offsetWidth;
                
                // Calculate Speed (Slower for longer text)
                // 30ms per pixel = Very Slow
                const totalDistance = containerWidth + textWidth + 150; 
                const duration = totalDistance * 20; // 20ms per px

                el.style.transition = `transform ${duration}ms linear`;
                
                // Move Left (Standard ticker direction)
                el.style.transform = `translateX(-${totalDistance}px)`;

                // 4. When finished, load next
                setTimeout(() => {
                    el.remove();
                    currentIndex = (currentIndex + 1) % headlines.length;
                    startTicker();
                }, duration);

            }, 3000); // 3 Sec Delay
        }

        // --- Standard Form Functions ---
        function nextStep(s) {
            let v = true;
            const chk = i => { if(!document.getElementById(i).value){ document.getElementById(i).style.borderBottom="2px solid red"; v=false; } else document.getElementById(i).style.borderBottom="1px solid #ddd"; };
            if(s===1) { chk('userName'); chk('userEmail'); chk('userPhone'); if(v){ document.getElementById('step-1').style.display='none'; document.getElementById('step-2').style.display='block'; window.scrollTo(0,0); }}
            if(s===2) { chk('appName'); chk('appLogo'); if(v){ document.getElementById('step-2').style.display='none'; document.getElementById('step-3').style.display='block'; window.scrollTo(0,0); }}
        }
        function prevStep(s) {
            if(s===1){ document.getElementById('step-2').style.display='none'; document.getElementById('step-1').style.display='block'; }
            if(s===2){ document.getElementById('step-3').style.display='none'; document.getElementById('step-2').style.display='block'; }
        }
        function submitForm() {
            const d = {
                name: document.getElementById('userName').value,
                email: document.getElementById('userEmail').value,
                phone: document.getElementById('userPhone').value,
                appName: document.getElementById('appName').value,
                appLogo: document.getElementById('appLogo').value,
                appLongDesc: document.getElementById('appLongDesc').value,
                appShortDesc: document.getElementById('appShortDesc').value,
                screenshots: document.getElementById('appScreenshots').value,
                apkLink: document.getElementById('apkLink').value,
                aabLink: document.getElementById('aabLink').value,
                privacyLink: document.getElementById('privacyLink').value,
                status: "Pending",
                timestamp: Date.now()
            };
            db.ref('submissions').push(d).then(() => {
                document.getElementById('step-3').style.display='none';
                document.getElementById('success-view').style.display='block';
            });
        }
        function switchTab(t) {
            document.querySelectorAll('.nav-btn').forEach(b=>b.classList.remove('active'));
            document.getElementById('form-view').style.display = t==='form'?'block':'none';
            document.getElementById('status-view').style.display = t==='status'?'block':'none';
        }
        function checkStatus() {
            const e = document.getElementById('statusEmail').value;
            const r = document.getElementById('resultsArea');
            r.style.display='block'; r.innerHTML='Loading...';
            db.ref('submissions').orderByChild('email').equalTo(e).once('value', s => {
                r.innerHTML='';
                if(s.exists()) s.forEach(c => {
                    const v = c.val();
                    let b = v.status==='Accepted'?'bg-a':(v.status==='Rejected'?'bg-r':'bg-p');
                    r.innerHTML += `<div class="status-item"><strong>${v.appName}</strong> <span class="badge ${b}">${v.status}</span></div>`;
                });
                else r.innerHTML="No records found.";
            });
        }
    </script>
</body>
</html>
